<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Direct Upload to Filebase</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: system-ui, Arial, sans-serif; margin: 2rem; max-width: 900px; }
    h1 { margin-bottom: .25rem; }
    .muted { color:#666; margin-top:0; }
    form { display:flex; gap:.75rem; align-items:center; flex-wrap:wrap; }
    input[type="file"] { flex: 1 1 auto; min-width: 260px; }
    input[type="password"] { flex: 1 1 320px; }
    button { padding:.6rem 1rem; }
    progress { width:100%; height:1.25rem; margin-top:.75rem; display:none; }
    #directResult { margin-top:.75rem; white-space:break-spaces; }
    .note { font-size:.9rem; color:#555; margin-top:.25rem; }
  </style>
</head>
<body>
  <h1>Direct Upload to Filebase</h1>
  <p class="muted">Uploads go straight from your browser â†’ Filebase via presigned URLs.</p>

  <form id="directUploadForm">
    <input type="file" id="directFile" name="file" required />

    <!-- TEMP for testing only. We'll replace with real auth later. -->
    <input type="password" id="uploadToken" placeholder="Paste APP_UPLOAD_TOKEN (temporary)" required />

    <button type="submit">Upload</button>
  </form>
  <div class="note">Large files are uploaded in chunks with resume-friendly multipart.</div>

  <progress id="overallProgress" value="0" max="100"></progress>
  <div id="directResult"></div>

  <script src="/js/app.js"></script>
</body>
<hr>
<h2>Bucket Catalog</h2>

<form id="catalogForm" style="display:flex;gap:.5rem;align-items:center;flex-wrap:wrap;">
  <input type="text" id="catalogPrefix" placeholder="Filter by prefix (e.g. 2025/09/04/)" style="min-width:320px;">
  <button type="submit">Load</button>
</form>

<div id="catalogMeta" class="muted" style="margin:.5rem 0;"></div>

<table id="catalogTable" border="1" cellpadding="6" cellspacing="0" style="width:100%;border-collapse:collapse;">
  <thead>
    <tr>
      <th style="text-align:left;">Key</th>
      <th style="text-align:right;">Size</th>
      <th style="text-align:left;">Last Modified</th>
      <th style="text-align:left;">Action</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<button id="catalogMore" style="margin-top:.5rem;display:none;">Load more</button>
</html>
